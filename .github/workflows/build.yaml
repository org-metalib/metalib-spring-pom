name: Build

#on: [workflow_dispatch]
on: [push]

jobs:
  test-project-build:
    runs-on: ubuntu-latest
    steps:
      - name: checkout repository
        uses: actions/checkout@v3
      - name: install java with maven
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '11'
          cache: 'maven'
          server-id: maven
          server-username: MAVEN_USERNAME
          server-password: MAVEN_CENTRAL_TOKEN
#          gpg-private-key: gpg-private
          gpg-passphrase: MAVEN_GPG_PASSPHRASE
      - name: run `mvn package`
        run: |
          cat ~/.m2/settings.xml
          #./mvnw -B package
    env:
      GITHUB_TOKEN: ${{ github.token }}
      MAVEN_USERNAME: ${{ secrets.OSSRH_USERNAME }}
      MAVEN_CENTRAL_TOKEN: ${{ secrets.OSSRH_PASWORD }}
      MAVEN_GPG_PASSPHRASE: ${{ secrets.OSSRH_GPG_PASSPHRASE }}
